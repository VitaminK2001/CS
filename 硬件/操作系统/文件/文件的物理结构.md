外存的分配方式
	静态分配
	一次性分配全部空间
	动态分配
	根据动态增长的文件长度分配

文件存储空间分配，通常以块或簇为单位（几个连续的物理块）
常用的分配方法有连续分配、链接分配、索引分配

# 连续分配
分配前说明待创建文件所需的存储空间大小,然后系统查找空闲区的管理表格,
查看是否有足够大的空闲区供其使用。如果有,就给文件分配所需的存储空间;如果没有,该文件就不能建立,用户进程必须等待

可把逻辑文件中的记录顺序地存储到相邻的物理盘块中,这样所形成的文件结构称为顺序文件结构,此时的物理文件称为顺序文件

连续分配的优点是查找速度比其他方法快(只需要起始块号和文件大小),目录中关于文件物理存储位置的信息也比较简单。其主要缺点是容易产生碎片,需要定期进行存储空间的紧缩。

# 链接分配

## 隐式链接
用于链接物理块的指针隐藏在物理块中
目录项中存放指向文件第一个和最后一个物理块的指针

## 显式链接
用于链接物理块的指针显示存放在一张表中，文件分配表(File Allocation Table FAT)
在FAT中找一个记录对应的物理地址还是需要顺序查找，不能随机查找
但是和隐式链接相比，该方案在内存中查找而不是在磁盘中，速度更快

# 索引分配
链接分配在要随机访问文件中的一个记录的时候
需要按照链接指针依次查找，十分缓慢
而且，指针要占用一定的磁盘空间

在索引分配中，系统为每个文件分配一个索引块，其中存放索引表
每个表项对应分配给该文件的物理块序号

1. 索引块的大小（节约的同时需要考虑大文件）
	1. 如果索引表本身很大，可以将索引表作为一个文件为其再建立一个索引表，第一级索引表的表项指向第二级索引，第二级索引表表项指向物理块。==主索引中的各块号是二级索引的块号，第二级索引中块号才构成文件的块号序列==
2. 存取文件需要两次访问外存（一次索引块，一次具体磁盘块）
	1. 可以将索引表调入内存

![[Pasted image 20230911203351.png]]
## 多级索引方式
![[Pasted image 20230911203757.png]]
