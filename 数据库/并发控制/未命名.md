并发方式

串行执行
交叉并发方式
同时并发方式

# 并发操作不加控制的情况
## 丢失修改
不同事务不同时刻读同一数据，后修改的事务**覆盖**前修改的事务

## 不可重复读
不同事务不同时刻读同一数据，一个事务的修改使得另一个事务**无法重复读到相同的结果**
- 读到不同的值
- 读取的记录缺失
- 读取的记录增多

## 读“脏”数据
不同事务不同时刻读同一数据，先读到的事务修改数据在后读到的数据读完后rollback之前的修改导致后读到的数据是数据库中不存在的数据。

# 封锁
排它锁X（红灯）和共享锁S（绿灯）
加了红灯以后，其他的事务不能读取或者修改，而且不能加红灯
加了绿灯以后，其他的事务可以读取但不能修改，而且可以加绿灯
![[Pasted image 20221212165038.png]]

# 封锁协议
封锁协议：红灯和绿灯什么时候亮，亮多久
## 一级封锁协议
如要修改，则加X锁
直到事务结束才释放X锁
能够防止丢失修改
但是不能防止不可重复读和读脏数据
因为没有对读操作限定
如果事务在**加X锁前和修改后**读数据就会出现不可重复读
如果事务在修改过程中读数据则会出现读脏数据，因为可能roll
## 二级封锁协议




