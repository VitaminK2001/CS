# ARQ

这种可靠传输协议常称为==自动重传请求ARQ(Automatic Repeat reQuest)==。

A发送一个报文，B收到后，发送确认报文给A，A再发送下一个报文
![[Pasted image 20230913133049.png]]
A只要超过了一段时间仍然没有收到确认，就认为刚才发送的分组丢失了，因而重传前面发送过的分组。这就叫做超时重传。

每发送完一个分组设置一个超时计时器

A在发送完一个分组后，==必须暂时保留已发送的分组的副本==（为发生超时重传时使用）
分组和确认分组都必须进行编号，这样才能==明确是哪一个发送出去的分组收到了确认==，而哪一个分组还没有收到确认。

使用上述的确认和重传机制，我们就可以在不可靠的传输网络上实现可靠的通信。
# 信道利用率低

![[Pasted image 20230913133514.png]]
因为仅仅是在时间 TD内才用来传送有用的数据（包括分组的首部），因此信道的利用率U可用下式计算
![[Pasted image 20230913133559.png|500]]
若出现重传，则对传送有用的数据信息来说，信道的利用率就还要降低

为了提高传输效率，发送方可以不使用低效率的停止等待协议，而是采用流水线传输,发送方可连续发送多个分组，不必每发完一个分组就停顿下来等待对方的确认,当使用流水线传输时，就要使用下面介绍的连续ARQ协议和滑动窗口协议。

# 连续ARQ协议和滑动窗口协议
![[Pasted image 20230913144538.png|500]]
发送方每收到一个确认，就把发送窗口向前滑动一个分组的位置。
